## Micro-Component Providers (MCPs)
link
MCP Name | File Path | Type | URL | Enabled  
---|---|---|---|---  
`context7` | `/code-yeongyu/oh-my-opencode/src/mcp/context7.ts` | `remote` | `https://mcp.context7.com/mcp` | `true`  
`grep_app` | `/code-yeongyu/oh-my-opencode/src/mcp/grep-app.ts` | `remote` | `https://mcp.grep.app` | `true`  
`websearch_exa` | `/code-yeongyu/oh-my-opencode/src/mcp/websearch-exa.ts` | `remote` | `https://mcp.exa.ai/mcp?tools=web_search_exa` | `true`  
The system manages and provides access to a collection of built-in Micro-Component Providers (MCPs). These MCPs can be selectively enabled or disabled, and their configurations for remote contexts and applications are centrally defined. The core architecture ensures type safety for MCP names and offers a mechanism to customize which built-in MCPs are active without altering their fundamental definitions.
The directory [`src/mcp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp) serves as the central hub for MCP management. Type definitions, such as [`McpNameSchema`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L3) and [`McpName`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L5) in [`src/mcp/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts), strictly define valid names for MCPs like [`websearch_exa`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts#L1), [`context7`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L10), and [`grep_app`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L11). This ensures consistency and validation across the application.
Each MCP, such as [`context7`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L10) (defined in [`src/mcp/context7.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/context7.ts)), [`grep_app`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L11) (in [`src/mcp/grep-app.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/grep-app.ts)), and [`websearch_exa`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts#L1) (in [`src/mcp/websearch-exa.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts)), includes configuration parameters such as a type, URL, and an enabled status. These configurations allow the system to interact with various remote services and applications.
The central registry of built-in MCPs is handled by [`allBuiltinMcps`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L8) within [`src/mcp/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts). This registry facilitates the dynamic enabling and disabling of MCPs through the [`createBuiltinMcps`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L14) function, allowing the application to initialize with a customized set of MCPs based on operational needs. This mechanism ensures that built-in MCPs can be tailored without altering their core definitions, offering flexibility in how different remote components are integrated and utilized.
### Core MCP Architecture and Type Definitions
link
MCP Name | Configuration File | Purpose  
---|---|---  
`context7` | `src/mcp/context7.ts` | Contextual search  
`grep_app` | `src/mcp/grep-app.ts` | Grep application search  
`websearch_exa` | `src/mcp/websearch-exa.ts` | Web search with Exa  
The foundational architecture of Micro-Component Providers (MCPs) is established by defining and validating their names to ensure type safety and consistent identification. This system underpins how all MCPs are managed within the application. The valid names for MCPs are strictly controlled by [`McpNameSchema`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L3), a Zod enum schema, which currently includes [`websearch_exa`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts#L1), [`context7`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L10), and [`grep_app`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L11). This schema is critical for input validation throughout the system. The [`McpName`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L5) TypeScript type is inferred directly from [`McpNameSchema`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L3) using [`z.infer`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L5), which ensures that any variable or parameter typed as [`McpName`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L5) will only accept one of the predefined MCP names, thereby maintaining type safety and alignment with the validation rules defined in [`src/mcp/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts). This strict naming convention facilitates the identification and management of individual MCPs, which are configured as remote services or applications with defined URLs and enablement statuses, as seen in configurations like [`websearch_exa`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts#L1) in [`src/mcp/websearch-exa.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts), [`context7`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L10) in [`src/mcp/context7.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/context7.ts), and [`grep_app`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L11) in [`src/mcp/grep-app.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/grep-app.ts). These definitions are centrally registered and managed, allowing for dynamic enabling and disabling of MCPs without altering their core definitions. For further details on how these MCPs are registered and customized, see [Built-in MCP Registration and Customization](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#micro-component-providers-mcps-built-in-mcp-registration-and-customization).
### Built-in MCP Registration and Customization
link
typescript 
content_copyCopy
export const websearch_exa = { type: "remote" as const, // Indicates a remote MCP (Multi-Modal Compute Platform) url: "https://mcp.exa.ai/mcp?tools=web_search_exa", // The URL for the remote MCP enabled: true, // Initial status: enabled for use }; // Example of another MCP definition: /* export const context7 = { type: "remote" as const, url: "https://mcp.context7.com/mcp", enabled: true, }; */
The system manages a central registry of built-in Micro-Component Providers (MCPs), which are configured remote services and applications. This registry, defined in [`allBuiltinMcps`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L8) within [`src/mcp/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts), includes entries such as [`websearch_exa`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/websearch-exa.ts#L1), [`context7`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L10), and [`grep_app`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L11). Each entry specifies the MCP's type (remote), its URL, and its initial enabled status.
To provide flexibility, the [`createBuiltinMcps`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts#L14) function in [`src/mcp/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/index.ts) allows for the dynamic enabling or disabling of these MCPs. This function accepts an array of MCP names to be excluded, returning a new collection that only includes the active MCPs. This mechanism ensures that the core definitions of built-in MCPs remain unchanged while allowing for custom configurations based on specific operational needs. The valid names for these MCPs are strictly defined and validated using [`McpNameSchema`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L3) and [`McpName`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts#L5) in [`src/mcp/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/mcp/types.ts), ensuring type safety across the application. For further details on how skills integrate with MCPs, refer to [Skill Management and Model Context Protocol (MCP) Integration](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#built-in-tools-and-utilities-skill-management-and-model-context-protocol-mcp-integration).
