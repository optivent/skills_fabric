## Built-in Tools and Utilities
link
Name / Category | Description | Location  
---|---|---  
**Callable Tools** |  |   
`ast_grep_search`, `ast_grep_replace` | AST-aware code search and replace | `tools/ast-grep/`  
`background_task`, `background_output`, `background_cancel` | Manage asynchronous agent tasks | `tools/background-task/`  
`call_omo_agent` | Spawn and interact with sub-agents (e.g., explore, librarian) | `tools/call-omo-agent/`  
`glob` | Fast file pattern matching with safety limits | `tools/glob/`  
`grep` | Fast content search using regex with safety limits | `tools/grep/`  
`interactive_bash` | Execute `tmux` commands for session management | `tools/interactive-bash/`  
`look_at` | Multimodal analysis of files (PDFs, images) via sub-agent | `tools/look-at/`  
`lsp_*` (11 tools) | Language Server Protocol diagnostics, navigation, and refactoring | `tools/lsp/`  
`session_list`, `session_read`, `session_search`, `session_info` | Manage and inspect OpenCode sessions | `tools/session-manager/`  
`skill`, `skill_mcp` | Load and execute defined skills; interact with MCP servers |  `tools/skill/`, `tools/skill-mcp/`  
`slashcommand` | Load and execute predefined commands or skills | `tools/slashcommand/`  
**Shared Utilities** |  |   
Configuration & Path | Resolves config directories and paths (e.g., `~/.claude`, XDG) |  `shared/claude-config-dir.ts`, `shared/config-path.ts`, `shared/data-path.ts`  
Text Processing | Token-aware truncation, frontmatter parsing, `!command` and `@file` resolution |  `shared/dynamic-truncator.ts`, `shared/frontmatter.ts`, `shared/command-executor.ts`, `shared/file-reference-resolver.ts`  
Data & Utilities | Deep merging objects, file utilities (symlinks), legacy name migration |  `shared/deep-merge.ts`, `shared/file-utils.ts`, `shared/migration.ts`  
The [`oh-my-opencode`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L328) project includes a collection of callable tools available for AI agents, providing functionalities that range from Language Server Protocol (LSP) integrations and Abstract Syntax Tree (AST)-aware code manipulation to file system operations, background task management, session management, interactive shell access, and multimodal analysis. These tools are orchestrated to enable multi-model orchestration, allowing agents to perform complex development tasks. Additionally, a set of shared utilities supports consistent configuration, file system interactions, text processing, command execution, and compatibility across the system.
The core tools are defined and exported through [`src/tools/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts). For in-depth documentation on the purpose, structure, usage, and design considerations of these tools, refer to the project's internal documentation in [`src/tools/AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/AGENTS.md).
**Shared Utilities**
A central repository of shared utility modules, located in [`src/shared`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared), underpins the functionality of various components within the system. These utilities address common needs such as:
  * **Configuration and Path Management** : Functions within [`src/shared`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared) facilitate the determination of configuration directories, such as [`getClaudeConfigDir`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/claude-config-dir.ts#L4) in [`src/shared/claude-config-dir.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/claude-config-dir.ts) for locating the Claude application's configuration. They also manage user-level and project-level configuration file paths ([`getUserConfigPath`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/config-path.ts#L38), [`getProjectConfigPath`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/config-path.ts#L45) in [`src/shared/config-path.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/config-path.ts)) and platform-agnostic data storage paths ([`getDataDir`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/data-path.ts#L12), [`getOpenCodeStorageDir`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/data-path.ts#L20) in [`src/shared/data-path.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/data-path.ts)). Configuration merging is handled by [`deepMerge`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/deep-merge.ts#L23) in [`src/shared/deep-merge.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/deep-merge.ts), which recursively combines objects while prioritizing override values and preventing prototype pollution. JSONC parsing, error tracking, and file reference resolution are also managed here.
  * **Text Processing** : Utilities like [`dynamicTruncate`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/dynamic-truncator.ts#L140) in [`src/shared/dynamic-truncator.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/dynamic-truncator.ts) provide token-aware truncation for managing AI context windows. File references within text (e.g., [`@filename`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/AGENTS.md?plain=1#L19)) can be resolved recursively into actual file content using [`resolveFileReferencesInText`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-reference-resolver.ts#L52) in [`src/shared/file-reference-resolver.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-reference-resolver.ts). Frontmatter parsing for extracting YAML metadata from strings is supported by [`parseFrontmatter`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/frontmatter.ts#L8) in [`src/shared/frontmatter.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/frontmatter.ts).
  * **Command Execution** : The [`executeHookCommand`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/command-executor.ts#L41) and [`executeCommand`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/command-executor.ts#L106) functions in [`src/shared/command-executor.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/command-executor.ts) enable the execution of shell commands, including specialized handling for Zsh and the resolution of embedded commands within text ([`resolveCommandsInText`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/command-executor.ts#L167)).
  * **Compatibility and Naming Conventions** : The system includes utilities for managing compatibility, such as [`isHookDisabled`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/hook-disabled.ts#L3) in [`src/shared/hook-disabled.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/hook-disabled.ts) for checking hook status and [`migrateAgentNames`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/migration.ts#L29) in [`src/shared/migration.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/migration.ts) for handling legacy agent names.
  * **File System Operations** : Functions like [`isMarkdownFile`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-utils.ts#L4), [`isSymbolicLink`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-utils.ts#L8), and [`resolveSymlink`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-utils.ts#L16) in [`src/shared/file-utils.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-utils.ts) assist in identifying file types and resolving symbolic links.

**Callable Tools**
The specialized callable tools provide agents with diverse capabilities:
  * **Language Server Protocol (LSP) Integrations** : The [`src/tools/lsp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/lsp) directory offers comprehensive tools for interacting with LSP servers. These tools allow agents to perform actions such as retrieving hover information, navigating to definitions, finding references, listing symbols, and obtaining diagnostics. The [`LSPServerManager`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/lsp/client.ts#L15) handles the lifecycle of LSP client instances, including creation, caching, and graceful shutdown, optimizing resource use. The configuration of LSP servers is managed through a layered approach, merging settings from project-specific and built-in definitions. See [Language Server Protocol (LSP) Integrations](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#language-server-protocol-lsp-integrations) for more details.
  * **AST-Aware Code Analysis and Transformation (AST-grep)** : Tools within [`src/tools/ast-grep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/ast-grep) facilitate structural code analysis and rewriting. Agents can use [`ast_grep_search`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L70) to find code patterns and [`ast_grep_replace`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L71) to perform AST-aware code modifications, leveraging the [`@ast-grep/napi`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/bun.lock#L9) binding for performance.
  * **Background Task Orchestration** : The [`src/tools/background-task`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/background-task) directory provides tools for managing asynchronous background tasks. Agents can initiate, retrieve output from, and cancel long-running processes, enabling parallel execution of operations.
  * **Inter-Agent Communication ([`call_omo_agent`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L538))**: The [`call_omo_agent`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L538) tool in [`src/tools/call-omo-agent`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/call-omo-agent) allows agents to delegate tasks to other specialized subagents, supporting both synchronous and asynchronous execution modes and robust argument validation.
  * **File System Search and Globbing** : Agents can efficiently search file content using [`grep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L72) (in [`src/tools/grep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/grep)), which leverages [`ripgrep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/grep/downloader.ts#L142) for regex-based content searching. The [`glob`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L73) tool (in [`src/tools/glob`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/glob)) provides pattern-matching capabilities for file paths.
  * **Interactive Shell Access with Tmux** : The [`interactive_bash`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/interactive-bash/tools.ts#L50) tool in [`src/tools/interactive-bash`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/interactive-bash) enables agents to execute interactive Bash commands within [`tmux`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L186) sessions, ensuring secure execution and managing command tokenization and timeouts.
  * **Multimodal File Analysis** : The [`look_at`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L584) tool in [`src/tools/look-at`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at) empowers AI agents to analyze various file types, such as PDFs and images, to extract information based on a defined goal. This involves MIME type inference and delegation to a specialized multimodal agent.
  * **Session Management and Interaction** : Tools in [`src/tools/session-manager`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager) allow for persistent storage, retrieval, and interaction with OpenCode session data. Agents can list, read, and search session information, messages, TODOs, and transcripts.
  * **Skill Management and Model Context Protocol (MCP) Integration** : The [`skill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L139) tool in [`src/tools/skill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill) enables the discovery, execution, and interaction with "skills" that encapsulate specialized knowledge and guidance. The [`skill_mcp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L604) tool in [`src/tools/skill-mcp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill-mcp) facilitates direct interaction with Skill MCP servers, allowing for the execution of named tools and retrieval of resources and prompts defined within skills. See [Skill and MCP Configuration Management](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#feature-orchestration-skill-and-mcp-configuration-management) for more details on MCP configuration.
  * **Dynamic Slash Command Execution** : The [`slashcommand`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L74) tool in [`src/tools/slashcommand`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand) allows for the definition, discovery, and execution of slash commands and skills from various scopes (user, project, global).

### Shared Utilities for Configuration and File Management
link

The [`oh-my-opencode`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L328) project centralizes its common functionalities within a set of shared utility modules, which address configuration management, file and path resolution, JSONC parsing, error tracking, dynamic text truncation, and file reference resolution. This modular approach promotes consistent application behavior and maintainability.
For configuration management, the system provides functions to determine the Claude application's configuration directory, prioritizing environment variables or defaulting to a home directory location, as seen in [`src/shared/claude-config-dir.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/claude-config-dir.ts). It also manages configuration file paths for [`oh-my-opencode`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L328) itself, locating user-level and project-level configuration files across operating systems, with a dual-check mechanism for Windows to ensure consistency and backward compatibility ([`src/shared/config-path.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/config-path.ts)). Data and storage directory paths are also managed to align with [`xdg-basedir`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/bun.lock#L22) behavior ([`src/shared/data-path.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/data-path.ts)). Configuration objects can be merged recursively with type safety, giving precedence to override values and preventing prototype pollution, while arrays are replaced entirely rather than concatenated ([`src/shared/deep-merge.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/deep-merge.ts)).
The system offers robust JSONC parsing capabilities through [`src/shared/jsonc-parser.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/jsonc-parser.ts), allowing for parsing JSON with comments, handling errors gracefully, reading from files, and detecting configuration file formats. Configuration loading errors are tracked globally, enabling the collection and reporting of issues across different stages of the configuration process ([`src/shared/config-errors.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/config-errors.ts)).
Text processing utilities are available, particularly for managing AI context windows. These include functions for estimating tokens, truncating text to fit within token limits while preserving header lines, and dynamically adjusting truncation based on available context window sizes ([`src/shared/dynamic-truncator.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/dynamic-truncator.ts)). File references embedded within text can be resolved recursively, replacing patterns like [`@filename`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/AGENTS.md?plain=1#L19) with the actual file content, handling non-existent files or directories by returning informative placeholders ([`src/shared/file-reference-resolver.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-reference-resolver.ts)). Additionally, utilities exist for identifying Markdown files and resolving symbolic links ([`src/shared/file-utils.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/file-utils.ts)). Frontmatter parsing is supported for extracting YAML metadata and body content from strings, using [`yaml.JSON_SCHEMA`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/frontmatter.ts#L23) for security ([`src/shared/frontmatter.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/frontmatter.ts)).
Other shared utilities encompass shell command execution with special handling for Zsh and the resolution of embedded commands within text ([`src/shared/command-executor.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/command-executor.ts)), a shared logging mechanism to a temporary file ([`src/shared/logger.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/logger.ts)), and compatibility helpers such as migration strategies for agent and hook names ([`src/shared/migration.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/migration.ts)). The structure and purpose of these shared utility modules are comprehensively documented in [`src/shared/AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/shared/AGENTS.md).
