## Built-in Commands and Skills
link

The system includes a set of built-in commands and skills that provide core functionalities, ranging from project documentation generation to iterative development workflows and browser automation. These are designed to be extensible and configurable, allowing for dynamic integration into the agent's operational environment.
Core command definitions and their loading mechanisms are managed in [`src/features/builtin-commands/commands.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts). This file registers commands such as [`init-deep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/config/schema.ts#L81) and [`ralph-loop`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L704), each with a description, an associated template, and argument hints. The [`loadBuiltinCommands`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L37) function allows for selective command loading and provides type safety through definitions in [`src/features/builtin-commands/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/types.ts). These commands are primarily prompt-based, indicating their role in guiding AI agent behavior.
One significant built-in command is [`init-deep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/config/schema.ts#L81), whose template is defined in [`src/features/builtin-commands/templates/init-deep.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/init-deep.ts). This command automates the generation of hierarchical [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files, which serve as knowledge bases within a project's directory structure. The process is divided into four concurrent phases: discovery and analysis of project information, scoring and location decision for [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) placement, content generation (including comprehensive root [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) and concise subdirectory [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files), and a final review and deduplication stage. This command employs dynamic agent spawning, LSP analysis, and fallback mechanisms like [`AST-grep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L727) for robust project understanding and documentation.
Another key built-in command is the "Ralph Loop," managed by templates in [`src/features/builtin-commands/templates/ralph-loop.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts). The [`RALPH_LOOP_TEMPLATE`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts#L1) defines an iterative, self-referential development cycle where an agent continuously works on a task until a completion condition, marked by a [`<promise>`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/hooks/ralph-loop/constants.ts#L3) tag, is met. This loop includes configurable maximum iterations and allows for user-initiated cancellation via the [`/cancel-ralph`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L707) command, whose instructions are detailed in the [`CANCEL_RALPH_TEMPLATE`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts#L31). This mechanism ensures that agents can pursue tasks iteratively until a defined objective is achieved or explicitly halted.
In addition to commands, the system also incorporates built-in skills, which are pre-configured functionalities designed for standardized access. The management and definition of these skills are centralized in [`src/features/builtin-skills`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills). The [`src/features/builtin-skills/skills.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts) file defines and exports specific skills, such as [`playwrightSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts#L3), which enables browser automation capabilities for tasks like web scraping, testing, and interaction. Each skill adheres to a [`BuiltinSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/types.ts#L3) interface, defined in [`src/features/builtin-skills/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/types.ts), which includes properties for its name, description, template, and Multi-Command Proxy (MCP) configuration. This structure facilitates the integration of diverse, specialized functionalities, allowing agents to leverage pre-existing tools and services, such as Playwright, through a unified interface. For further details on MCP configuration, refer to [Micro-Component Providers (MCPs)](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#micro-component-providers-mcps).
### Built-in Command Definitions and Configuration
link

The system manages built-in commands through a structured approach that emphasizes definition, configuration, and selective availability. These commands, such as [`init-deep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/config/schema.ts#L81) for generating project documentation and [`ralph-loop`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L704) for iterative development, are foundational to how AI agents interact with and develop within the environment.
Core definitions for commands are stored in [`BUILTIN_COMMAND_DEFINITIONS`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L6) within [`src/features/builtin-commands/commands.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts). Each command definition includes a description of its purpose, a template containing instructions or prompts for the AI agent, and an [`argumentHint`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L45) to guide developers on proper usage. The use of templates for command definitions suggests an AI-driven system where instructions can be dynamically interpreted and executed by agents.
Configuration structures for built-in commands are defined in [`src/features/builtin-commands/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/types.ts). The [`BuiltinCommandConfig`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/types.ts#L5) interface allows for specifying an array of [`disabled_commands`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/types.ts#L6), enabling specific commands to be deactivated. This provides flexibility for different operational contexts or system configurations.
Commands are made available through the [`loadBuiltinCommands`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L37) function in [`src/features/builtin-commands/commands.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts). This function retrieves command definitions, filtering out any commands that have been explicitly disabled. It also omits the [`argumentHint`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L45) property when preparing commands for [`openCodeCompatible`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L45) use, indicating that argument hints are primarily for developer guidance rather than runtime execution. The system leverages an aggregation point in [`src/features/builtin-commands/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/index.ts) to simplify imports for other modules needing access to these command definitions and types.
For a deeper understanding of how these commands facilitate project documentation, refer to [Project Documentation Generation with [`init-deep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/config/schema.ts#L81)](#built-in-commands-and-skills-project-documentation-generation-with-init-deep). The iterative development process is further detailed in [Iterative Development with the "Ralph Loop"](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#built-in-commands-and-skills-iterative-development-with-the-ralph-loop).
### Project Documentation Generation with `init-deep`
link

The [`init-deep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/config/schema.ts#L81) command facilitates the generation of hierarchical [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files, which serve as knowledge bases within a project. This process is structured into four concurrent and sequential phases, managed by the [`INIT_DEEP_TEMPLATE`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/init-deep.ts#L1) defined in [`src/features/builtin-commands/templates/init-deep.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/init-deep.ts). The template emphasizes concurrency and dynamic adaptation to project complexity, while maintaining strict quality control over the generated documentation.
The first phase, **Discovery + Analysis** , gathers comprehensive project information. This involves running [`explore`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/agents/utils.ts#L19) agents as background tasks to analyze the project's structure, identify conventions, anti-patterns, and build configurations. Concurrently, the main session performs bash structural analysis to determine directory depths, file counts, and code concentration. Existing [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files are read to preserve context, even when regeneration is requested via the [`--create-new`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L16) flag. If available, Language Server Protocol (LSP) is leveraged to identify entry points and key symbols, with a fallback mechanism to [`explore`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/agents/utils.ts#L19) agents and AST-grep ([`src/tools/ast-grep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/ast-grep)) if LSP is not present. This phase's results, including those from background tasks, are then collected and merged.
The **Scoring & Location Decision** phase evaluates directories to determine where new [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files should be created. Directories are scored based on factors such as file count, code ratio, and symbol density. The root directory always receives an [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) file, while other directories are selected based on their scores, aiming to document distinct domains without over-documenting smaller, less significant areas.
During the **Generate AGENTS.md** phase, the actual documentation files are created. The root [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) is generated first, providing a comprehensive overview including project structure, code maps, conventions, and anti-patterns. Subsequently, a [`document-writer`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L337) agent is tasked to generate concise [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files for selected subdirectories as background tasks. These subdirectory-specific files focus on local context, avoiding repetition of parent content and adhering to size limits.
Finally, the **Review & Deduplicate** phase refines the generated [`AGENTS.md`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L552) files. This involves removing generic advice and content duplicated from parent documents. Files are trimmed to ensure a telegraphic style and adherence to size limits, maintaining the quality and relevance of the knowledge base.
For more details on the iterative development process, refer to [Iterative Development with the "Ralph Loop"](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#built-in-commands-and-skills-iterative-development-with-the-ralph-loop).
### Iterative Development with the "Ralph Loop"
link

The "Ralph Loop" facilitates an iterative development process for AI agents through the use of built-in templates. This functionality is defined by the [`RALPH_LOOP_TEMPLATE`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts#L1) in [`src/features/builtin-commands/templates/ralph-loop.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts), which outlines a continuous, self-referential cycle where an agent works on a task until it determines completion.
Agents operating within a Ralph Loop are instructed to signal task completion by outputting a [`<promise>`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/hooks/ralph-loop/constants.ts#L3) tag, optionally with custom text specified via the [`--completion-promise=TEXT`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L27) argument. If this tag is not detected, the loop continues with injected prompts, guiding the agent through further iterations. To prevent indefinite execution, the loop includes a configurable maximum number of iterations, settable with [`--max-iterations=N`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L27), with a default of 100. The agent is also provided with rules to ensure effective execution, emphasizing full completion, meaningful progress, and the use of TODO items.
The Ralph Loop can exit under three conditions:
  1. **Completion** : The agent outputs the designated promise tag.
  2. **Maximum Iterations** : The loop automatically stops if the configured iteration limit is reached.
  3. **Cancellation** : A user can manually cancel an active Ralph Loop using the [`/cancel-ralph`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L707) command. The [`CANCEL_RALPH_TEMPLATE`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts#L31), also defined in [`src/features/builtin-commands/templates/ralph-loop.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/templates/ralph-loop.ts), provides instructions for this cancellation, which involves stopping the loop, clearing its state, and allowing the session to conclude normally.

The initiation of the Ralph Loop involves parsing arguments for the task description, custom completion promise text, and maximum iterations, enabling flexible deployment of this iterative workflow.
### Built-in Skill Management and Playwright Integration
link

The system defines and manages built-in skills, which provide standardized access to pre-configured functionalities. These skills are structured and exposed through a common interface, allowing for consistent integration and utilization across the platform.
A core example of a built-in skill is the [`playwrightSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts#L3), which enables browser automation capabilities. This skill allows agents to perform tasks such as web scraping, testing, taking screenshots, and interacting with web elements programmatically. The definition of [`playwrightSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts#L3) includes properties like its [`name`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/agents/utils.ts#L95), [`description`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L129), and a Markdown [`template`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/hooks/auto-slash-command/executor.ts#L183) that guides its usage, particularly in conjunction with a Playwright Multi-Command Proxy (MCP) server.
All built-in skills conform to the [`BuiltinSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/types.ts#L3) interface, defined in [`src/features/builtin-skills/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/types.ts). This interface standardizes properties such as [`name`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/agents/utils.ts#L95), [`description`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L129), [`template`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/hooks/auto-slash-command/executor.ts#L183), and critically, [`mcpConfig`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/opencode-skill-loader/loader.ts#L72). The [`mcpConfig`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/opencode-skill-loader/loader.ts#L72) field facilitates the interaction between a skill and external command execution services, allowing skills to invoke commands via an MCP server.
Built-in skills are instantiated and retrieved through the [`createBuiltinSkills()`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts#L17) function, located in [`src/features/builtin-skills/skills.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts). This function acts as a factory, returning an array of available [`BuiltinSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/types.ts#L3) objects. This design promotes extensibility, as new skills can be added by simply defining them and including them in the array returned by [`createBuiltinSkills()`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts#L17). The module's entry point, [`src/features/builtin-skills/index.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/index.ts), re-exports the [`createBuiltinSkills`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-skills/skills.ts#L17) function and all relevant types, simplifying access to built-in skill management from other parts of the codebase. The integration of skills with MCP servers is further elaborated in [Skill and MCP Configuration Management](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#feature-orchestration-skill-and-mcp-configuration-management) and [Skill Management and Model Context Protocol (MCP) Integration](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#built-in-tools-and-utilities-skill-management-and-model-context-protocol-mcp-integration).
