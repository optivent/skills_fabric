### Multimodal File Analysis
link

The [`look_at`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L584) tool enables AI agents to analyze diverse file types, such as PDFs and images, to extract specific information based on a defined goal. This capability is crucial for tasks that require an understanding or summarization of visual or document-based content. The process involves inferring the MIME type of the file and delegating the analysis to a specialized multimodal agent.
The system uses [`inferMimeType`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/tools.ts#L8) to determine the file type, which allows for appropriate processing. Once the MIME type is identified, the [`look_at`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L584) tool orchestrates the interaction with a dedicated [`MULTIMODAL_LOOKER_AGENT`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/constants.ts#L1). This agent is responsible for performing the actual analysis, using the provided [`goal`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/types.ts#L3) to focus its efforts and return targeted information rather than raw file contents. This delegation ensures that the core AI agent can leverage specialized capabilities for handling complex media analysis. The definition of the [`MULTIMODAL_LOOKER_AGENT`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/constants.ts#L1) and the capabilities of the [`look_at`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L584) tool are established in [`src/tools/look-at/constants.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/constants.ts) and [`src/tools/look-at/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/tools.ts), respectively. The data structure for arguments passed to this operation is defined by the [`LookAtArgs`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/types.ts#L1) interface in [`src/tools/look-at/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/look-at/types.ts).
### Session Management and Interaction
link

The system provides a suite of tools for managing and interacting with OpenCode session data, ensuring persistent storage and retrieval of conversational history and related information. This includes mechanisms for listing, reading, searching, and obtaining detailed information about sessions, messages, TODO items, and transcripts.
Session data is primarily managed through operations on the file system. The core storage module, located at [`src/tools/session-manager/storage.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/storage.ts), handles the persistent storage of session data, including messages, their individual parts, and metadata. It provides functions to retrieve high-level session overviews, check for the existence of specific sessions, and read detailed content such as messages and TODOs. For example, it can identify main sessions, which are those not initiated as sub-sessions, and filter them by their associated project directory.
The system defines specific tools to interact with this stored data, detailed in [`src/tools/session-manager/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/tools.ts). The [`session_list`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L75) tool allows users to view a summary of available sessions, with options to filter by date range or limit the number of results. The [`session_read`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L76) tool provides access to the full content of a specific session, including all messages and, optionally, any associated TODOs. For investigating session history, the [`session_search`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L77) tool enables searching for specific queries within message content across all sessions or within a single designated session, offering both case-sensitive and case-insensitive options. Finally, the [`session_info`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L78) tool retrieves comprehensive metadata for any given session, offering insights into its properties.
To ensure consistency and clarity in data structures, the system defines a set of TypeScript interfaces in [`src/tools/session-manager/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/types.ts). These interfaces, such as [`SessionMessage`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/types.ts#L1), [`MessagePart`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/types.ts#L12), [`SessionInfo`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/types.ts#L24), [`TodoItem`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/types.ts#L36), and [`SessionMetadata`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/types.ts#L52), standardize how conversational elements, session summaries, task items, and session properties are represented and exchanged throughout the system.
Utility functions, housed in [`src/tools/session-manager/utils.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/utils.ts), are responsible for transforming raw session data into human-readable formats suitable for display. These utilities handle tasks like formatting lists of sessions, structuring individual messages for presentation (including various message parts like text, agent thoughts, or tool usage), summarizing session details, and presenting search results with contextual excerpts. They also provide mechanisms for filtering sessions based on date ranges and performing in-depth text searches within session content. Critical constants, such as file paths for storing session data and detailed descriptions for each session management tool, are centralized in [`src/tools/session-manager/constants.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/session-manager/constants.ts), ensuring consistent configuration and documentation.
### Skill Management and Model Context Protocol (MCP) Integration
link

The system provides tools for agents to manage and interact with "skills," which are encapsulations of specialized knowledge and guided procedures. This is primarily facilitated by the [`skill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L139) tool and its integration with Micro-Component Protocol (MCP) servers via the [`skill_mcp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L604) tool.
The [`skill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L139) tool, created by the [`createSkillTool`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L125) function in [`src/tools/skill/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts), enables agents to discover available skills, retrieve detailed information about them, and execute specific skills. The tool's description dynamically lists available skills using an XML-like format, informing agents about their purpose and how to use them. When a skill is "executed," its content is extracted, and if the skill includes MCP configurations, the tool also queries and formats information about the tools, resources, and prompts available through the associated MCP servers. This allows agents to understand and leverage external services that a skill might expose.
The [`skill_mcp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L604) tool, defined by [`createSkillMcpTool`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill-mcp/tools.ts#L104) in [`src/tools/skill-mcp/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill-mcp/tools.ts), acts as a gateway for agents to directly interact with the functionalities exposed by skill-embedded MCP servers. Agents use this tool to perform three main operations:
  * **Execute a tool** : Call a named tool on an MCP server with specific arguments.
  * **Read a resource** : Access a resource identified by a URI from an MCP server.
  * **Retrieve a prompt** : Fetch a named prompt from an MCP server with provided arguments.

The [`skill_mcp`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/README.md?plain=1#L604) tool enforces strict parameter validation to ensure that only one operation type (tool execution, resource reading, or prompt retrieval) is specified per call. It identifies the target MCP server from the currently loaded skills and routes the request through a [`SkillMcpManager`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/skill-mcp-manager/manager.ts#L14) instance for communication. Arguments for MCP operations are passed as JSON strings, and results are returned in a JSON format, with an optional [`grep`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L72) filter for refining the output. The system also generates informative error messages and provides lists of available MCP servers when an agent attempts to access a non-existent one, guiding the agent towards correct usage. These capabilities collectively allow agents to effectively discover, understand, and utilize specialized functionalities and external services defined within skills, enhancing their ability to perform complex tasks.
### Dynamic Slash Command Execution
link

The [`slashcommand`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L74) tool enables the system to discover, load, and execute predefined commands and skills from various scopes (user, project, and global), presenting them to agents or users for interaction. This mechanism allows for dynamic command content resolution and provides up-to-date listings of available commands.
Commands and skills are managed through [`src/tools/slashcommand/tools.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand/tools.ts), which scans specified directories for Markdown files. These Markdown files contain frontmatter used to extract command metadata, such as its [`name`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/agents/utils.ts#L95), [`description`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/tools.ts#L129), [`argumentHint`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/builtin-commands/commands.ts#L45), [`model`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/agents/utils.ts#L102), [`agent`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/cli/index.ts#L72), and [`subtask`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand/types.ts#L9) status, as defined by the [`CommandMetadata`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand/types.ts#L3) and [`CommandInfo`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand/types.ts#L12) interfaces in [`src/tools/slashcommand/types.ts`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand/types.ts). The discovery process assigns a [`scope`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/skill/types.ts#L12) to each command, influencing its priority. For instance, project-specific commands take precedence over global or user-defined commands.
Skills, which encapsulate specialized knowledge or guidance, are integrated into this system by converting [`LoadedSkill`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/features/opencode-skill-loader/types.ts#L20) objects into the [`CommandInfo`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/slashcommand/types.ts#L12) structure, ensuring they are handled consistently with other commands. The tool can dynamically generate formatted descriptions of individual commands and lists of all available commands and skills, incorporating file references and embedded commands within their content.
When the [`slashcommand`](https://github.com/code-yeongyu/oh-my-opencode/blob/d0694e5aa4ecd5e0179718e190136f8b213200d9/src/tools/index.ts#L74) tool is invoked, it attempts to find an exact match for the requested command. If an exact match is not found, it can suggest partial matches or return an error message that includes a list of available commands. This ensures that agents can effectively delegate tasks to specialized subagents or leverage predefined functionalities. For more information on inter-agent communication, refer to [Inter-Agent Communication: call_omo_agent](https://codewiki.google/github.com/code-yeongyu/oh-my-opencode#built-in-tools-and-utilities-inter-agent-communication-call-omo-agent).
