# SOURCE: https://github.com/angristan/opencode-wakatime

[Skip to content](https://github.com/angristan/opencode-wakatime#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fangristan%2Fopencode-wakatime)
Appearance settings
  * Platform
    * AI CODE CREATION
      * [ GitHub CopilotWrite better code with AI ](https://github.com/features/copilot)
      * [ GitHub SparkBuild and deploy intelligent apps ](https://github.com/features/spark)
      * [ GitHub ModelsManage and compare prompts ](https://github.com/features/models)
      * [ MCP RegistryNewIntegrate external tools ](https://github.com/mcp)
    * DEVELOPER WORKFLOWS
      * [ ActionsAutomate any workflow ](https://github.com/features/actions)
      * [ CodespacesInstant dev environments ](https://github.com/features/codespaces)
      * [ IssuesPlan and track work ](https://github.com/features/issues)
      * [ Code ReviewManage code changes ](https://github.com/features/code-review)
    * APPLICATION SECURITY
      * [ GitHub Advanced SecurityFind and fix vulnerabilities ](https://github.com/security/advanced-security)
      * [ Code securitySecure your code as you build ](https://github.com/security/advanced-security/code-security)
      * [ Secret protectionStop leaks before they start ](https://github.com/security/advanced-security/secret-protection)
    * EXPLORE
      * [Why GitHub](https://github.com/why-github)
      * [Documentation](https://docs.github.com)
      * [Blog](https://github.blog)
      * [Changelog](https://github.blog/changelog)
      * [Marketplace](https://github.com/marketplace)
[View all features](https://github.com/features)
  * Solutions
    * BY COMPANY SIZE
      * [Enterprises](https://github.com/enterprise)
      * [Small and medium teams](https://github.com/team)
      * [Startups](https://github.com/enterprise/startups)
      * [Nonprofits](https://github.com/solutions/industry/nonprofits)
    * BY USE CASE
      * [App Modernization](https://github.com/solutions/use-case/app-modernization)
      * [DevSecOps](https://github.com/solutions/use-case/devsecops)
      * [DevOps](https://github.com/solutions/use-case/devops)
      * [CI/CD](https://github.com/solutions/use-case/ci-cd)
      * [View all use cases](https://github.com/solutions/use-case)
    * BY INDUSTRY
      * [Healthcare](https://github.com/solutions/industry/healthcare)
      * [Financial services](https://github.com/solutions/industry/financial-services)
      * [Manufacturing](https://github.com/solutions/industry/manufacturing)
      * [Government](https://github.com/solutions/industry/government)
      * [View all industries](https://github.com/solutions/industry)
[View all solutions](https://github.com/solutions)
  * Resources
    * EXPLORE BY TOPIC
      * [AI](https://github.com/resources/articles?topic=ai)
      * [Software Development](https://github.com/resources/articles?topic=software-development)
      * [DevOps](https://github.com/resources/articles?topic=devops)
      * [Security](https://github.com/resources/articles?topic=security)
      * [View all topics](https://github.com/resources/articles)
    * EXPLORE BY TYPE
      * [Customer stories](https://github.com/customer-stories)
      * [Events & webinars](https://github.com/resources/events)
      * [Ebooks & reports](https://github.com/resources/whitepapers)
      * [Business insights](https://github.com/solutions/executive-insights)
      * [GitHub Skills](https://skills.github.com)
    * SUPPORT & SERVICES
      * [Documentation](https://docs.github.com)
      * [Customer support](https://support.github.com)
      * [Community forum](https://github.com/orgs/community/discussions)
      * [Trust center](https://github.com/trust-center)
      * [Partners](https://github.com/partners)
  * Open Source
    * COMMUNITY
      * [ GitHub SponsorsFund open source developers ](https://github.com/sponsors)
    * PROGRAMS
      * [Security Lab](https://securitylab.github.com)
      * [Maintainer Community](https://maintainers.github.com)
      * [Accelerator](https://github.com/accelerator)
      * [Archive Program](https://archiveprogram.github.com)
    * REPOSITORIES
      * [Topics](https://github.com/topics)
      * [Trending](https://github.com/trending)
      * [Collections](https://github.com/collections)
  * Enterprise
    * ENTERPRISE SOLUTIONS
      * [ Enterprise platformAI-powered developer platform ](https://github.com/enterprise)
    * AVAILABLE ADD-ONS
      * [ GitHub Advanced SecurityEnterprise-grade security features ](https://github.com/security/advanced-security)
      * [ Copilot for BusinessEnterprise-grade AI features ](https://github.com/features/copilot/copilot-business)
      * [ Premium SupportEnterprise-grade 24/7 support ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fangristan%2Fopencode-wakatime)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=angristan%2Fopencode-wakatime)
Appearance settings
Resetting focus
You signed in with another tab or window. [Reload](https://github.com/angristan/opencode-wakatime) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/angristan/opencode-wakatime) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/angristan/opencode-wakatime) to refresh your session. Dismiss alert
{{ message }}
[ angristan ](https://github.com/angristan) / **[opencode-wakatime](https://github.com/angristan/opencode-wakatime) ** Public
  * [ ](https://github.com/login?return_to=%2Fangristan%2Fopencode-wakatime) You must be signed in to change notification settings
  * [ 0 ](https://github.com/login?return_to=%2Fangristan%2Fopencode-wakatime)
  * [ Star  19 ](https://github.com/login?return_to=%2Fangristan%2Fopencode-wakatime)


Track Opencode usage with Wakatime 
[www.npmjs.com/package/opencode-wakatime](https://www.npmjs.com/package/opencode-wakatime "https://www.npmjs.com/package/opencode-wakatime")
### License
[ ](https://github.com/angristan/opencode-wakatime/blob/master/LICENSE)
[ 19 stars ](https://github.com/angristan/opencode-wakatime/stargazers) [ 0 forks ](https://github.com/angristan/opencode-wakatime/forks) [ Branches ](https://github.com/angristan/opencode-wakatime/branches) [ Tags ](https://github.com/angristan/opencode-wakatime/tags) [ Activity ](https://github.com/angristan/opencode-wakatime/activity)
[ Star  ](https://github.com/login?return_to=%2Fangristan%2Fopencode-wakatime)
[ ](https://github.com/login?return_to=%2Fangristan%2Fopencode-wakatime) You must be signed in to change notification settings
  * [ Code ](https://github.com/angristan/opencode-wakatime)
  * [ Issues 0 ](https://github.com/angristan/opencode-wakatime/issues)
  * [ Pull requests 0 ](https://github.com/angristan/opencode-wakatime/pulls)
  * [ Actions ](https://github.com/angristan/opencode-wakatime/actions)
  * [ Projects 0 ](https://github.com/angristan/opencode-wakatime/projects)
  * [ Security ](https://github.com/angristan/opencode-wakatime/security)
[ ](https://github.com/angristan/opencode-wakatime/security)
[ ](https://github.com/angristan/opencode-wakatime/security)
[ ](https://github.com/angristan/opencode-wakatime/security)
### [ Uh oh!  ](https://github.com/angristan/opencode-wakatime/security)
[There was an error while loading. ](https://github.com/angristan/opencode-wakatime/security)[Please reload this page](https://github.com/angristan/opencode-wakatime).
  * [ Insights ](https://github.com/angristan/opencode-wakatime/pulse)


Additional navigation options
  * [ Code  ](https://github.com/angristan/opencode-wakatime)
  * [ Issues  ](https://github.com/angristan/opencode-wakatime/issues)
  * [ Pull requests  ](https://github.com/angristan/opencode-wakatime/pulls)
  * [ Actions  ](https://github.com/angristan/opencode-wakatime/actions)
  * [ Projects  ](https://github.com/angristan/opencode-wakatime/projects)
  * [ Security  ](https://github.com/angristan/opencode-wakatime/security)
  * [ Insights  ](https://github.com/angristan/opencode-wakatime/pulse)


# angristan/opencode-wakatime
master
[Branches](https://github.com/angristan/opencode-wakatime/branches)[Tags](https://github.com/angristan/opencode-wakatime/tags)
[](https://github.com/angristan/opencode-wakatime/branches)[](https://github.com/angristan/opencode-wakatime/tags)
Go to file
Code
Open more actions menu
## Folders and files
Name | Name | Last commit message | Last commit date  
---|---|---|---  
## Latest commit
## History
[26 Commits](https://github.com/angristan/opencode-wakatime/commits/master/)[](https://github.com/angristan/opencode-wakatime/commits/master/)  
[.github](https://github.com/angristan/opencode-wakatime/tree/master/.github ".github") | [.github](https://github.com/angristan/opencode-wakatime/tree/master/.github ".github") |  |   
[.husky](https://github.com/angristan/opencode-wakatime/tree/master/.husky ".husky") | [.husky](https://github.com/angristan/opencode-wakatime/tree/master/.husky ".husky") |  |   
[bin](https://github.com/angristan/opencode-wakatime/tree/master/bin "bin") | [bin](https://github.com/angristan/opencode-wakatime/tree/master/bin "bin") |  |   
[src](https://github.com/angristan/opencode-wakatime/tree/master/src "src") | [src](https://github.com/angristan/opencode-wakatime/tree/master/src "src") |  |   
[.gitignore](https://github.com/angristan/opencode-wakatime/blob/master/.gitignore ".gitignore") | [.gitignore](https://github.com/angristan/opencode-wakatime/blob/master/.gitignore ".gitignore") |  |   
[.releaserc.json](https://github.com/angristan/opencode-wakatime/blob/master/.releaserc.json ".releaserc.json") | [.releaserc.json](https://github.com/angristan/opencode-wakatime/blob/master/.releaserc.json ".releaserc.json") |  |   
[CHANGELOG.md](https://github.com/angristan/opencode-wakatime/blob/master/CHANGELOG.md "CHANGELOG.md") | [CHANGELOG.md](https://github.com/angristan/opencode-wakatime/blob/master/CHANGELOG.md "CHANGELOG.md") |  |   
[LICENSE](https://github.com/angristan/opencode-wakatime/blob/master/LICENSE "LICENSE") | [LICENSE](https://github.com/angristan/opencode-wakatime/blob/master/LICENSE "LICENSE") |  |   
[README.md](https://github.com/angristan/opencode-wakatime/blob/master/README.md "README.md") | [README.md](https://github.com/angristan/opencode-wakatime/blob/master/README.md "README.md") |  |   
[biome.json](https://github.com/angristan/opencode-wakatime/blob/master/biome.json "biome.json") | [biome.json](https://github.com/angristan/opencode-wakatime/blob/master/biome.json "biome.json") |  |   
[commitlint.config.mjs](https://github.com/angristan/opencode-wakatime/blob/master/commitlint.config.mjs "commitlint.config.mjs") | [commitlint.config.mjs](https://github.com/angristan/opencode-wakatime/blob/master/commitlint.config.mjs "commitlint.config.mjs") |  |   
[package-lock.json](https://github.com/angristan/opencode-wakatime/blob/master/package-lock.json "package-lock.json") | [package-lock.json](https://github.com/angristan/opencode-wakatime/blob/master/package-lock.json "package-lock.json") |  |   
[package.json](https://github.com/angristan/opencode-wakatime/blob/master/package.json "package.json") | [package.json](https://github.com/angristan/opencode-wakatime/blob/master/package.json "package.json") |  |   
[tsconfig.json](https://github.com/angristan/opencode-wakatime/blob/master/tsconfig.json "tsconfig.json") | [tsconfig.json](https://github.com/angristan/opencode-wakatime/blob/master/tsconfig.json "tsconfig.json") |  |   
View all files  
## Repository files navigation
  * [README](https://github.com/angristan/opencode-wakatime)
  * [MIT license](https://github.com/angristan/opencode-wakatime)


# opencode-wakatime
[](https://github.com/angristan/opencode-wakatime#opencode-wakatime)
[![npm version](https://camo.githubusercontent.com/d2e5c8bfd95952b3ff8f696c0678d6d03aef0122cd250ae04e4e8f93db09ff5f/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6f70656e636f64652d77616b6174696d65)](https://www.npmjs.com/package/opencode-wakatime) [![npm downloads](https://camo.githubusercontent.com/82677cf613b2c3e2fc9a5914334321c2e180c57ac04033960311159e3c2bd99b/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f646d2f6f70656e636f64652d77616b6174696d65)](https://www.npmjs.com/package/opencode-wakatime) [![CI](https://github.com/angristan/opencode-wakatime/actions/workflows/workflow.yml/badge.svg)](https://github.com/angristan/opencode-wakatime/actions/workflows/workflow.yml) [![License: MIT](https://camo.githubusercontent.com/08cef40a9105b6526ca22088bc514fbfdbc9aac1ddbf8d4e6c750e3a88a44dca/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d626c75652e737667)](https://github.com/angristan/opencode-wakatime/blob/master/LICENSE)
WakaTime plugin for [OpenCode](https://github.com/sst/opencode) - Track your AI coding activity, lines of code, and time spent.
Inspired by [claude-code-wakatime](https://github.com/wakatime/claude-code-wakatime).
Also check out [codex-wakatime](https://github.com/angristan/codex-wakatime) for OpenAI Codex CLI!
## Features
[](https://github.com/angristan/opencode-wakatime#features)
  * **Automatic CLI management** - Downloads and updates wakatime-cli automatically
  * **Detailed file tracking** - Tracks file reads and modifications (edit, write, patch, multiedit)
  * **AI coding metrics** - Sends `--ai-line-changes` for WakaTime AI coding analytics
  * **Rate-limited heartbeats** - 1 per minute to avoid API spam
  * **Session lifecycle** - Sends final heartbeat on session idle/end


## Prerequisites
[](https://github.com/angristan/opencode-wakatime#prerequisites)
### WakaTime API Key
[](https://github.com/angristan/opencode-wakatime#wakatime-api-key)
Ensure you have a WakaTime API key configured in `~/.wakatime.cfg`:
```
[settings]
api_key = waka_your_api_key_here
```

You can get your API key from [WakaTime Settings](https://wakatime.com/settings/api-key).
### WakaTime CLI (Optional)
[](https://github.com/angristan/opencode-wakatime#wakatime-cli-optional)
The plugin will automatically download wakatime-cli if not found. However, you can also install it manually:
**macOS:**
```
brew install wakatime-cli
```

**Other platforms:** Download from [WakaTime releases](https://github.com/wakatime/wakatime-cli/releases/latest).
## Installation
[](https://github.com/angristan/opencode-wakatime#installation)
### Via npm (recommended)
[](https://github.com/angristan/opencode-wakatime#via-npm-recommended)
```
npm i -g opencode-wakatime
opencode-wakatime --install
```

This installs the plugin to `~/.config/opencode/plugin/wakatime.js`.
To update, run the same commands again.
### From source
[](https://github.com/angristan/opencode-wakatime#from-source)
```
git clone https://github.com/angristan/opencode-wakatime
cd opencode-wakatime
npm install && npm run build
node bin/cli.js --install
```

The plugin will be automatically loaded by OpenCode - no configuration needed.
## How It Works
[](https://github.com/angristan/opencode-wakatime#how-it-works)
The plugin hooks into OpenCode's event system:
Loading
```
flowchart TB
    subgraph OpenCode["OpenCode"]
        A[Tool Execution<br/>read, edit, write, patch, multiedit] --> H1[tool.execute.after]
        B[Chat Activity] --> H2[chat.message]
        C[Session Events<br/>idle, end] --> H3[event]
    end

    subgraph Plugin["opencode-wakatime Plugin"]
        H1 --> P1[Extract File Changes<br/>path, additions, deletions]
        P1 --> Q[Heartbeat Queue]

        H2 -.->|triggers| P2[Process Queue]
        Q --> P2
        P2 --> R[Rate Limiter<br/>1 per minute]

        H3 --> P3[Flush Final<br/>Heartbeat]
        P3 --> R
    end

    subgraph WakaTime["WakaTime"]
        R --> CLI[wakatime-cli]
        CLI --> API[WakaTime API]
        API --> D[Dashboard<br/>AI Coding Metrics]
    end


```

### Hooks Used
[](https://github.com/angristan/opencode-wakatime#hooks-used)
Hook | Purpose  
---|---  
`tool.execute.after` | Tracks file modifications from tools  
`chat.message` | Triggers heartbeat processing on activity  
`event` | Listens for session lifecycle events  
### Tool Tracking
[](https://github.com/angristan/opencode-wakatime#tool-tracking)
Tool | Data Extracted  
---|---  
`read` | File path (from title)  
`edit` | File path, additions, deletions (from `filediff`)  
`write` | File path, new file detection  
`patch` | File paths from output, diff count  
`multiedit` | File paths and changes from each edit result  
### Heartbeat Data
[](https://github.com/angristan/opencode-wakatime#heartbeat-data)
Each heartbeat includes:
  * **Entity** : File path being worked on
  * **Project folder** : Working directory
  * **AI line changes** : Net lines added/removed (`additions - deletions`)
  * **Category** : "ai coding"
  * **Plugin identifier** : `opencode/1.0.0 opencode-wakatime/1.0.0`


## Files
[](https://github.com/angristan/opencode-wakatime#files)
File | Purpose  
---|---  
`~/.wakatime/opencode.log` | Debug logs  
`~/.wakatime/opencode.json` | State (last heartbeat timestamp)  
`~/.wakatime/opencode-cli-state.json` | CLI version tracking  
`~/.wakatime/wakatime-cli-*` | Auto-downloaded CLI binary  
## Development
[](https://github.com/angristan/opencode-wakatime#development)
```
# Install dependencies
npm install

# Type check
npm run typecheck

# Build
npm run build
```

## Troubleshooting
[](https://github.com/angristan/opencode-wakatime#troubleshooting)
### Plugin not loading
[](https://github.com/angristan/opencode-wakatime#plugin-not-loading)
  1. Check your config file syntax (`opencode.jsonc`)
  2. Verify the plugin path is correct
  3. Check logs at `~/.wakatime/opencode.log`


### Heartbeats not sending
[](https://github.com/angristan/opencode-wakatime#heartbeats-not-sending)
  1. Verify API key in `~/.wakatime.cfg`
  2. Check if wakatime-cli is working: `wakatime-cli --version`
  3. Enable debug logging and check `~/.wakatime/opencode.log`


### CLI not downloading
[](https://github.com/angristan/opencode-wakatime#cli-not-downloading)
  1. Check network connectivity
  2. Verify write permissions to `~/.wakatime/`
  3. Manually install: `brew install wakatime-cli`


## License
[](https://github.com/angristan/opencode-wakatime#license)
MIT
## About
Track Opencode usage with Wakatime 
[www.npmjs.com/package/opencode-wakatime](https://www.npmjs.com/package/opencode-wakatime "https://www.npmjs.com/package/opencode-wakatime")
### Topics
[ opencode ](https://github.com/topics/opencode "Topic: opencode") [ wakatime ](https://github.com/topics/wakatime "Topic: wakatime") [ coding-agent ](https://github.com/topics/coding-agent "Topic: coding-agent") [ opencode-plugin ](https://github.com/topics/opencode-plugin "Topic: opencode-plugin")
### Resources
[ ](https://github.com/angristan/opencode-wakatime#readme-ov-file)
### License
[ ](https://github.com/angristan/opencode-wakatime#MIT-1-ov-file)
###  Uh oh! 
There was an error while loading. [Please reload this page](https://github.com/angristan/opencode-wakatime).
[Activity](https://github.com/angristan/opencode-wakatime/activity)
### Stars
[**19** stars](https://github.com/angristan/opencode-wakatime/stargazers)
### Watchers
[**2** watching](https://github.com/angristan/opencode-wakatime/watchers)
### Forks
[**0** forks](https://github.com/angristan/opencode-wakatime/forks)
[ Report repository ](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fangristan%2Fopencode-wakatime&report=angristan+%28user%29)
##  [Releases 3](https://github.com/angristan/opencode-wakatime/releases)
[ v1.1.0 Latest  Dec 23, 2025 ](https://github.com/angristan/opencode-wakatime/releases/tag/v1.1.0)
[+ 2 releases](https://github.com/angristan/opencode-wakatime/releases)
###  Uh oh! 
There was an error while loading. [Please reload this page](https://github.com/angristan/opencode-wakatime).
##  [Contributors 3](https://github.com/angristan/opencode-wakatime/graphs/contributors)
  * [ ![@angristan](https://avatars.githubusercontent.com/u/11699655?s=64&v=4) ](https://github.com/angristan) [ **angristan** Stanislas ](https://github.com/angristan)
  * [ ![@semantic-release-bot](https://avatars.githubusercontent.com/u/32174276?s=64&v=4) ](https://github.com/semantic-release-bot) [ **semantic-release-bot** Semantic Release Bot ](https://github.com/semantic-release-bot)
  * [ ![@dependabot\[bot\]](https://avatars.githubusercontent.com/in/29110?s=64&v=4) ](https://github.com/apps/dependabot) [ **dependabot[bot]** ](https://github.com/apps/dependabot)


## Languages
  * [ TypeScript 93.8% ](https://github.com/angristan/opencode-wakatime/search?l=typescript)
  * [ JavaScript 6.2% ](https://github.com/angristan/opencode-wakatime/search?l=javascript)


## Footer
[ ](https://github.com) Â© 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Community](https://github.community/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 


